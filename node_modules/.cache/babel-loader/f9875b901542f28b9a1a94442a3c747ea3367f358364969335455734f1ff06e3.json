{"ast":null,"code":"\"use strict\";\n\n/* eslint-disable class-methods-use-this */\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RequestWrapper = void 0;\n/**\n * (C) Copyright IBM Corp. 2014, 2023.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar axios_1 = __importDefault(require(\"axios\"));\nvar rax = __importStar(require(\"retry-axios\"));\nvar extend_1 = __importDefault(require(\"extend\"));\nvar form_data_1 = __importDefault(require(\"form-data\"));\nvar https_1 = require(\"https\");\nvar isstream_1 = __importDefault(require(\"isstream\"));\nvar querystring_1 = require(\"querystring\");\nvar zlib_1 = require(\"zlib\");\nvar helper_1 = require(\"./helper\");\nvar logger_1 = __importDefault(require(\"./logger\"));\nvar stream_to_promise_1 = require(\"./stream-to-promise\");\nvar cookie_support_1 = require(\"./cookie-support\");\nvar chain_error_1 = require(\"./chain-error\");\nvar RequestWrapper = /** @class */function () {\n  function RequestWrapper(axiosOptions) {\n    var _this = this;\n    axiosOptions = axiosOptions || {};\n    this.compressRequestData = Boolean(axiosOptions.enableGzipCompression);\n    // override a couple axios defaults\n    var axiosConfig = {\n      maxContentLength: -1,\n      maxBodyLength: Infinity\n    };\n    // merge axios config into default\n    (0, extend_1.default)(true, axiosConfig, axiosOptions);\n    // if the user explicitly sets `disableSslVerification` to true,\n    // `rejectUnauthorized` must be set to false in the https agent\n    if (axiosOptions.disableSslVerification === true) {\n      // the user may have already provided a custom agent. if so, update it\n      if (axiosConfig.httpsAgent) {\n        // check for presence of `options` field for \"type safety\"\n        if (axiosConfig.httpsAgent.options) {\n          axiosConfig.httpsAgent.options.rejectUnauthorized = false;\n        }\n      } else {\n        // if no agent is present, create a new one\n        axiosConfig.httpsAgent = new https_1.Agent({\n          rejectUnauthorized: false\n        });\n      }\n    }\n    this.axiosInstance = axios_1.default.create(axiosConfig);\n    // axios sets the default Content-Type for `post`, `put`, and `patch` operations\n    // to 'application/x-www-form-urlencoded'. This causes problems, so overriding the\n    // defaults here\n    ['post', 'put', 'patch'].forEach(function (op) {\n      _this.axiosInstance.defaults.headers[op]['Content-Type'] = 'application/json';\n    });\n    // if a cookie jar is provided, register our cookie interceptors with axios\n    if (axiosOptions.jar) {\n      (0, cookie_support_1.createCookieInterceptor)(axiosOptions.jar)(this.axiosInstance);\n    }\n    // get retry config properties and conditionally enable retries\n    if (axiosOptions.enableRetries) {\n      var retryOptions = {};\n      if (axiosOptions.maxRetries !== undefined) {\n        retryOptions.maxRetries = axiosOptions.maxRetries;\n      }\n      if (axiosOptions.retryInterval !== undefined) {\n        retryOptions.maxRetryInterval = axiosOptions.retryInterval;\n      }\n      this.enableRetries(retryOptions);\n    }\n    // set debug interceptors\n    if (process.env.NODE_DEBUG === 'axios' || process.env.DEBUG) {\n      this.axiosInstance.interceptors.request.use(function (config) {\n        logger_1.default.debug('Request:');\n        logger_1.default.debug(config);\n        return config;\n      }, function (error) {\n        logger_1.default.error('Error: ');\n        logger_1.default.error(error);\n        return Promise.reject(error);\n      });\n      this.axiosInstance.interceptors.response.use(function (response) {\n        logger_1.default.debug('Response:');\n        logger_1.default.debug(response);\n        return response;\n      }, function (error) {\n        logger_1.default.error('Error: ');\n        logger_1.default.error(error);\n        return Promise.reject(error);\n      });\n    }\n  }\n  RequestWrapper.prototype.setCompressRequestData = function (setting) {\n    this.compressRequestData = setting;\n  };\n  /**\n   * Creates the request.\n   * 1. Merge default options with user provided options\n   * 2. Checks for missing parameters\n   * 3. Encode path and query parameters\n   * 4. Call the api\n   * @returns ReadableStream|undefined\n   * @throws Error\n   */\n  RequestWrapper.prototype.sendRequest = function (parameters) {\n    return __awaiter(this, void 0, void 0, function () {\n      var options, path, body, form, formData, qs, method, serviceUrl, headers, url, multipartForm, _i, _a, key, values, _b, values_1, value, fileObj, data, requestParams;\n      var _this = this;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            options = (0, extend_1.default)(true, {}, parameters.defaultOptions, parameters.options);\n            path = options.path, body = options.body, form = options.form, formData = options.formData, qs = options.qs, method = options.method, serviceUrl = options.serviceUrl;\n            headers = options.headers, url = options.url;\n            multipartForm = new form_data_1.default();\n            if (!formData) return [3 /*break*/, 7];\n            _i = 0, _a = Object.keys(formData);\n            _c.label = 1;\n          case 1:\n            if (!(_i < _a.length)) return [3 /*break*/, 7];\n            key = _a[_i];\n            values = Array.isArray(formData[key]) ? formData[key] : [formData[key]];\n            // Skip keys with undefined/null values or empty object value\n            values = values.filter(function (v) {\n              return v != null && !(0, helper_1.isEmptyObject)(v);\n            });\n            _b = 0, values_1 = values;\n            _c.label = 2;\n          case 2:\n            if (!(_b < values_1.length)) return [3 /*break*/, 6];\n            value = values_1[_b];\n            if (!(!Object.prototype.hasOwnProperty.call(value, 'contentType') || Object.prototype.hasOwnProperty.call(value, 'data'))) return [3 /*break*/, 5];\n            if (!(0, helper_1.isFileWithMetadata)(value)) return [3 /*break*/, 4];\n            return [4 /*yield*/, (0, helper_1.buildRequestFileObject)(value)];\n          case 3:\n            fileObj = _c.sent();\n            multipartForm.append(key, fileObj.value, fileObj.options);\n            return [3 /*break*/, 5];\n          case 4:\n            if (typeof value === 'object' && !(0, helper_1.isFileData)(value)) {\n              value = JSON.stringify(value);\n            }\n            multipartForm.append(key, value);\n            _c.label = 5;\n          case 5:\n            _b++;\n            return [3 /*break*/, 2];\n          case 6:\n            _i++;\n            return [3 /*break*/, 1];\n          case 7:\n            // Path params\n            url = parsePath(url, path);\n            // Headers\n            options.headers = __assign({}, options.headers);\n            // Convert array-valued query params to strings\n            if (qs && Object.keys(qs).length > 0) {\n              Object.keys(qs).forEach(function (key) {\n                if (Array.isArray(qs[key])) {\n                  qs[key] = qs[key].join(',');\n                }\n              });\n            }\n            // Add service default endpoint if options.url start with /\n            if (url && url.charAt(0) === '/') {\n              url = (0, helper_1.stripTrailingSlash)(serviceUrl) + url;\n            }\n            url = (0, helper_1.stripTrailingSlash)(url);\n            data = body;\n            if (form) {\n              data = (0, querystring_1.stringify)(form);\n              headers['Content-type'] = 'application/x-www-form-urlencoded';\n            }\n            if (formData) {\n              data = multipartForm;\n              // form-data generates headers that MUST be included or the request will fail\n              headers = (0, extend_1.default)(true, {}, headers, multipartForm.getHeaders());\n            }\n            // accept gzip encoded responses if Accept-Encoding is not already set\n            headers['Accept-Encoding'] = headers['Accept-Encoding'] || 'gzip';\n            if (!this.compressRequestData) return [3 /*break*/, 9];\n            return [4 /*yield*/, this.gzipRequestBody(data, headers)];\n          case 8:\n            data = _c.sent();\n            _c.label = 9;\n          case 9:\n            requestParams = {\n              url: url,\n              method: method,\n              headers: headers,\n              params: qs,\n              data: data,\n              raxConfig: this.raxConfig,\n              responseType: options.responseType || 'json',\n              paramsSerializer: {\n                serialize: function (params) {\n                  return (0, querystring_1.stringify)(params);\n                }\n              }\n            };\n            return [2 /*return*/, this.axiosInstance(requestParams).then(function (res) {\n              // sometimes error responses will still trigger the `then` block - escape that behavior here\n              if (!res) {\n                return undefined;\n              }\n              // these objects contain circular json structures and are not always relevant to the user\n              // if the user wants them, they can be accessed through the debug properties\n              delete res.config;\n              delete res.request;\n              // the other sdks use the interface `result` for the body\n              // eslint-disable-next-line @typescript-eslint/dot-notation\n              res['result'] = ensureJSONResponseBodyIsObject(res);\n              delete res.data;\n              // return another promise that resolves with 'res' to be handled in generated code\n              return res;\n            }, function (err) {\n              // return another promise that rejects with 'err' to be handled in generated code\n              throw _this.formatError(err);\n            })];\n        }\n      });\n    });\n  };\n  /**\n   * Format error returned by axios\n   * @param axiosError - the object returned by axios via rejection\n   * @returns the Error object\n   */\n  RequestWrapper.prototype.formatError = function (axiosError) {\n    // return an actual error object,\n    // but make it flexible so we can add properties like 'body'\n    var error = new Error();\n    // axios specific handling\n    // this branch is for an error received from the service\n    if (axiosError.response) {\n      axiosError = axiosError.response;\n      // The request was made and the server responded with a status code\n      // that falls out of the range of 2xx\n      delete axiosError.config;\n      delete axiosError.request;\n      error.statusText = axiosError.statusText;\n      error.name = axiosError.statusText; // ** deprecated **\n      error.status = axiosError.status;\n      error.code = axiosError.status; // ** deprecated **\n      error.message = parseServiceErrorMessage(axiosError.data) || axiosError.statusText;\n      // attach the error response body to the error\n      var errorBody = void 0;\n      try {\n        // try/catch to detect objects with circular references\n        errorBody = JSON.stringify(axiosError.data);\n      } catch (e) {\n        logger_1.default.warn('Error field `result` contains circular reference(s)');\n        logger_1.default.debug(\"Failed to stringify error response body: \".concat(e));\n        errorBody = axiosError.data;\n      }\n      error.result = ensureJSONResponseBodyIsObject(axiosError);\n      error.body = errorBody; // ** deprecated **\n      // attach headers to error object\n      error.headers = axiosError.headers;\n      // print a more descriptive error message for auth issues\n      if (isAuthenticationError(axiosError)) {\n        error.message = 'Access is denied due to invalid credentials.';\n      }\n    } else if (axiosError.request) {\n      // The request was made but no response was received\n      // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n      // http.ClientRequest in node.js\n      error.message = axiosError.message;\n      error.statusText = axiosError.code;\n      error.body = 'Response not received - no connection was made to the service.';\n      // when a request to a private cloud instance has an ssl problem, it never connects and follows this branch of the error handling\n      if (isSelfSignedCertificateError(axiosError)) {\n        error.message = \"The connection failed because the SSL certificate is not valid. \" + \"To use a self-signed certificate, set the `disableSslVerification` parameter in the constructor options.\";\n      }\n    } else {\n      // Something happened in setting up the request that triggered an Error\n      error.message = axiosError.message;\n    }\n    return error;\n  };\n  RequestWrapper.prototype.getHttpClient = function () {\n    return this.axiosInstance;\n  };\n  RequestWrapper.getRaxConfig = function (axiosInstance, retryOptions) {\n    var config = {\n      retry: 4,\n      retryDelay: 1000,\n      httpMethodsToRetry: ['GET', 'HEAD', 'OPTIONS', 'DELETE', 'PUT', 'POST'],\n      // do not retry on 501\n      statusCodesToRetry: [[429, 429], [500, 500], [502, 599]],\n      instance: axiosInstance,\n      backoffType: 'exponential',\n      checkRetryAfter: true,\n      maxRetryDelay: 30 * 1000 // default to 30 sec max delay\n    };\n    if (retryOptions) {\n      if (typeof retryOptions.maxRetries === 'number') {\n        config.retry = retryOptions.maxRetries;\n      }\n      if (typeof retryOptions.maxRetryInterval === 'number') {\n        // convert seconds to ms for retry-axios\n        config.maxRetryDelay = retryOptions.maxRetryInterval * 1000;\n      }\n    }\n    return config;\n  };\n  RequestWrapper.prototype.enableRetries = function (retryOptions) {\n    // avoid attaching the same interceptor multiple times\n    // to protect against user error and ensure disableRetries() always disables retries\n    if (typeof this.retryInterceptorId === 'number') {\n      this.disableRetries();\n    }\n    this.raxConfig = RequestWrapper.getRaxConfig(this.axiosInstance, retryOptions);\n    this.retryInterceptorId = rax.attach(this.axiosInstance);\n  };\n  RequestWrapper.prototype.disableRetries = function () {\n    if (typeof this.retryInterceptorId === 'number') {\n      rax.detach(this.retryInterceptorId, this.axiosInstance);\n      delete this.retryInterceptorId;\n      delete this.raxConfig;\n    }\n  };\n  RequestWrapper.prototype.gzipRequestBody = function (data, headers) {\n    return __awaiter(this, void 0, void 0, function () {\n      var contentSetToGzip, reqBuffer, streamData, err_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            contentSetToGzip = headers['Content-Encoding'] && headers['Content-Encoding'].toString().includes('gzip');\n            if (!data || contentSetToGzip) {\n              return [2 /*return*/, data];\n            }\n            _a.label = 1;\n          case 1:\n            _a.trys.push([1, 5,, 6]);\n            if (!(0, isstream_1.default)(data)) return [3 /*break*/, 3];\n            return [4 /*yield*/, (0, stream_to_promise_1.streamToPromise)(data)];\n          case 2:\n            streamData = _a.sent();\n            reqBuffer = Buffer.isBuffer(streamData) ? streamData : Buffer.from(streamData);\n            return [3 /*break*/, 4];\n          case 3:\n            if (Buffer.isBuffer(data)) {\n              reqBuffer = data;\n            } else if (data.toString && data.toString() !== '[object Object]' && !Array.isArray(data)) {\n              // this handles pretty much any primitive that isnt a JSON object or array\n              reqBuffer = Buffer.from(data.toString());\n            } else {\n              reqBuffer = Buffer.from(JSON.stringify(data));\n            }\n            _a.label = 4;\n          case 4:\n            return [3 /*break*/, 6];\n          case 5:\n            err_1 = _a.sent();\n            logger_1.default.error('Error converting request body to a buffer - data will not be compressed.');\n            logger_1.default.debug(err_1);\n            return [2 /*return*/, data];\n          case 6:\n            try {\n              data = (0, zlib_1.gzipSync)(reqBuffer);\n              // update the headers by reference - only if the data was actually compressed\n              headers['Content-Encoding'] = 'gzip';\n            } catch (err) {\n              // if an exception is caught, `data` will still be in its original form\n              // we can just proceed with the request uncompressed\n              logger_1.default.error('Error compressing request body - data will not be compressed.');\n              logger_1.default.debug(err);\n            }\n            return [2 /*return*/, data];\n        }\n      });\n    });\n  };\n  return RequestWrapper;\n}();\nexports.RequestWrapper = RequestWrapper;\n/**\n * Parses the path.\n * @param path - the path\n * @param params - the params\n * @returns the parsed path\n */\nfunction parsePath(path, params) {\n  if (!path || !params) {\n    return path;\n  }\n  return Object.keys(params).reduce(function (parsedPath, param) {\n    var value = encodeURIComponent(params[param]);\n    return parsedPath.replace(new RegExp(\"{\".concat(param, \"}\")), value);\n  }, path);\n}\n/**\n * Determine if the error is due to bad credentials\n * @param error - error object returned from axios\n * @returns true if error is due to authentication\n */\nfunction isAuthenticationError(error) {\n  var isAuthErr = false;\n  var code = error.status || null;\n  var body = error.data || {};\n  // handle specific error from iam service, should be relevant across platforms\n  var isIamServiceError = body.context && body.context.url && body.context.url.indexOf('iam') > -1;\n  if (code === 401 || code === 403 || isIamServiceError) {\n    isAuthErr = true;\n  }\n  return isAuthErr;\n}\n/**\n * Determine if the error is due to a bad self signed certificate\n * @param error - error object returned from axios\n * @returnstrue if error is due to an SSL error\n */\nfunction isSelfSignedCertificateError(error) {\n  var result = false;\n  var sslCode = 'DEPTH_ZERO_SELF_SIGNED_CERT';\n  var sslMessage = 'self signed certificate';\n  var hasSslCode = error.code === sslCode;\n  var hasSslMessage = hasStringProperty(error, 'message') && error.message.includes(sslMessage);\n  if (hasSslCode || hasSslMessage) {\n    result = true;\n  }\n  return result;\n}\n/**\n * Return true if object has a specified property that is a string\n * @param obj - object to look for property in\n * @param property - name of the property to look for\n * @returns true if property exists and is string\n */\nfunction hasStringProperty(obj, property) {\n  return Boolean(obj[property] && typeof obj[property] === 'string');\n}\n/**\n * Look for service error message in common places, by priority\n * first look in `errors[0].message`, then in `error`, then in\n * `message`, then in `errorMessage`\n * @param response - error response body received from service\n * @returns the error message if is was found, undefined otherwise\n */\nfunction parseServiceErrorMessage(response) {\n  var message;\n  if (Array.isArray(response.errors) && response.errors.length > 0 && hasStringProperty(response.errors[0], 'message')) {\n    message = response.errors[0].message;\n  } else if (hasStringProperty(response, 'error')) {\n    message = response.error;\n  } else if (hasStringProperty(response, 'message')) {\n    message = response.message;\n  } else if (hasStringProperty(response, 'errorMessage')) {\n    message = response.errorMessage;\n  }\n  logger_1.default.info(\"Parsing service error message: \".concat(message));\n  return message;\n}\n/**\n * Check response for a JSON content type and a string-formatted body. If those\n * conditions are met, we want to return an object for the body to the user. If\n * the JSON string coming from the service is invalid, we want to raise an\n * exception.\n *\n * @param response - incoming response object\n * @returns response body - as either an object or a string\n * @throws error - if the content is meant as JSON but is malformed\n */\nfunction ensureJSONResponseBodyIsObject(response) {\n  // If axios gave us an empty string, it is because the response had an empty body\n  // which can happen for a HEAD request, etc. Return the empty string in that case\n  if (typeof response.data !== 'string' || response.data === '' || !(0, helper_1.isJsonMimeType)(response.headers['content-type'])) {\n    return response.data;\n  }\n  // If the content is supposed to be JSON but axios gave us a string, it is most\n  // likely due to the fact that the service sent malformed JSON, which is an error.\n  //\n  // We'll try to parse the string and return a proper object to the user but if\n  // it fails, we'll log an error and raise an exception.\n  var dataAsObject = response.data;\n  try {\n    dataAsObject = JSON.parse(response.data);\n  } catch (e) {\n    logger_1.default.verbose('Response body was supposed to have JSON content but JSON parsing failed.');\n    logger_1.default.verbose(\"Malformed JSON string: \".concat(response.data));\n    throw (0, chain_error_1.chainError)(new Error('Error processing HTTP response:'), e);\n  }\n  return dataAsObject;\n}","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","op","TypeError","pop","push","__importDefault","exports","RequestWrapper","axios_1","require","rax","extend_1","form_data_1","https_1","isstream_1","querystring_1","zlib_1","helper_1","logger_1","stream_to_promise_1","cookie_support_1","chain_error_1","axiosOptions","_this","compressRequestData","Boolean","enableGzipCompression","axiosConfig","maxContentLength","maxBodyLength","Infinity","default","disableSslVerification","httpsAgent","options","rejectUnauthorized","Agent","axiosInstance","forEach","defaults","headers","jar","createCookieInterceptor","enableRetries","retryOptions","maxRetries","retryInterval","maxRetryInterval","process","env","NODE_DEBUG","DEBUG","interceptors","request","use","config","debug","error","response","setCompressRequestData","setting","sendRequest","parameters","path","form","formData","qs","method","serviceUrl","url","multipartForm","_i","_a","key","values","_b","values_1","fileObj","data","requestParams","_c","defaultOptions","keys","Array","isArray","filter","isEmptyObject","isFileWithMetadata","buildRequestFileObject","append","isFileData","JSON","stringify","parsePath","join","charAt","stripTrailingSlash","getHeaders","gzipRequestBody","params","raxConfig","responseType","paramsSerializer","serialize","res","ensureJSONResponseBodyIsObject","err","formatError","axiosError","Error","statusText","name","status","code","message","parseServiceErrorMessage","errorBody","warn","concat","isAuthenticationError","isSelfSignedCertificateError","getHttpClient","getRaxConfig","retry","retryDelay","httpMethodsToRetry","statusCodesToRetry","instance","backoffType","checkRetryAfter","maxRetryDelay","retryInterceptorId","disableRetries","attach","detach","contentSetToGzip","reqBuffer","streamData","err_1","toString","includes","streamToPromise","Buffer","isBuffer","from","gzipSync","reduce","parsedPath","param","encodeURIComponent","replace","RegExp","isAuthErr","isIamServiceError","context","indexOf","sslCode","sslMessage","hasSslCode","hasSslMessage","hasStringProperty","obj","property","errors","errorMessage","info","isJsonMimeType","dataAsObject","parse","verbose","chainError"],"sources":["/Users/nidhi/Desktop/cve-analysis-app/node_modules/ibm-cloud-sdk-core/lib/request-wrapper.js"],"sourcesContent":["\"use strict\";\n/* eslint-disable class-methods-use-this */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RequestWrapper = void 0;\n/**\n * (C) Copyright IBM Corp. 2014, 2023.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar axios_1 = __importDefault(require(\"axios\"));\nvar rax = __importStar(require(\"retry-axios\"));\nvar extend_1 = __importDefault(require(\"extend\"));\nvar form_data_1 = __importDefault(require(\"form-data\"));\nvar https_1 = require(\"https\");\nvar isstream_1 = __importDefault(require(\"isstream\"));\nvar querystring_1 = require(\"querystring\");\nvar zlib_1 = require(\"zlib\");\nvar helper_1 = require(\"./helper\");\nvar logger_1 = __importDefault(require(\"./logger\"));\nvar stream_to_promise_1 = require(\"./stream-to-promise\");\nvar cookie_support_1 = require(\"./cookie-support\");\nvar chain_error_1 = require(\"./chain-error\");\nvar RequestWrapper = /** @class */ (function () {\n    function RequestWrapper(axiosOptions) {\n        var _this = this;\n        axiosOptions = axiosOptions || {};\n        this.compressRequestData = Boolean(axiosOptions.enableGzipCompression);\n        // override a couple axios defaults\n        var axiosConfig = {\n            maxContentLength: -1,\n            maxBodyLength: Infinity,\n        };\n        // merge axios config into default\n        (0, extend_1.default)(true, axiosConfig, axiosOptions);\n        // if the user explicitly sets `disableSslVerification` to true,\n        // `rejectUnauthorized` must be set to false in the https agent\n        if (axiosOptions.disableSslVerification === true) {\n            // the user may have already provided a custom agent. if so, update it\n            if (axiosConfig.httpsAgent) {\n                // check for presence of `options` field for \"type safety\"\n                if (axiosConfig.httpsAgent.options) {\n                    axiosConfig.httpsAgent.options.rejectUnauthorized = false;\n                }\n            }\n            else {\n                // if no agent is present, create a new one\n                axiosConfig.httpsAgent = new https_1.Agent({\n                    rejectUnauthorized: false,\n                });\n            }\n        }\n        this.axiosInstance = axios_1.default.create(axiosConfig);\n        // axios sets the default Content-Type for `post`, `put`, and `patch` operations\n        // to 'application/x-www-form-urlencoded'. This causes problems, so overriding the\n        // defaults here\n        ['post', 'put', 'patch'].forEach(function (op) {\n            _this.axiosInstance.defaults.headers[op]['Content-Type'] = 'application/json';\n        });\n        // if a cookie jar is provided, register our cookie interceptors with axios\n        if (axiosOptions.jar) {\n            (0, cookie_support_1.createCookieInterceptor)(axiosOptions.jar)(this.axiosInstance);\n        }\n        // get retry config properties and conditionally enable retries\n        if (axiosOptions.enableRetries) {\n            var retryOptions = {};\n            if (axiosOptions.maxRetries !== undefined) {\n                retryOptions.maxRetries = axiosOptions.maxRetries;\n            }\n            if (axiosOptions.retryInterval !== undefined) {\n                retryOptions.maxRetryInterval = axiosOptions.retryInterval;\n            }\n            this.enableRetries(retryOptions);\n        }\n        // set debug interceptors\n        if (process.env.NODE_DEBUG === 'axios' || process.env.DEBUG) {\n            this.axiosInstance.interceptors.request.use(function (config) {\n                logger_1.default.debug('Request:');\n                logger_1.default.debug(config);\n                return config;\n            }, function (error) {\n                logger_1.default.error('Error: ');\n                logger_1.default.error(error);\n                return Promise.reject(error);\n            });\n            this.axiosInstance.interceptors.response.use(function (response) {\n                logger_1.default.debug('Response:');\n                logger_1.default.debug(response);\n                return response;\n            }, function (error) {\n                logger_1.default.error('Error: ');\n                logger_1.default.error(error);\n                return Promise.reject(error);\n            });\n        }\n    }\n    RequestWrapper.prototype.setCompressRequestData = function (setting) {\n        this.compressRequestData = setting;\n    };\n    /**\n     * Creates the request.\n     * 1. Merge default options with user provided options\n     * 2. Checks for missing parameters\n     * 3. Encode path and query parameters\n     * 4. Call the api\n     * @returns ReadableStream|undefined\n     * @throws Error\n     */\n    RequestWrapper.prototype.sendRequest = function (parameters) {\n        return __awaiter(this, void 0, void 0, function () {\n            var options, path, body, form, formData, qs, method, serviceUrl, headers, url, multipartForm, _i, _a, key, values, _b, values_1, value, fileObj, data, requestParams;\n            var _this = this;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        options = (0, extend_1.default)(true, {}, parameters.defaultOptions, parameters.options);\n                        path = options.path, body = options.body, form = options.form, formData = options.formData, qs = options.qs, method = options.method, serviceUrl = options.serviceUrl;\n                        headers = options.headers, url = options.url;\n                        multipartForm = new form_data_1.default();\n                        if (!formData) return [3 /*break*/, 7];\n                        _i = 0, _a = Object.keys(formData);\n                        _c.label = 1;\n                    case 1:\n                        if (!(_i < _a.length)) return [3 /*break*/, 7];\n                        key = _a[_i];\n                        values = Array.isArray(formData[key]) ? formData[key] : [formData[key]];\n                        // Skip keys with undefined/null values or empty object value\n                        values = values.filter(function (v) { return v != null && !(0, helper_1.isEmptyObject)(v); });\n                        _b = 0, values_1 = values;\n                        _c.label = 2;\n                    case 2:\n                        if (!(_b < values_1.length)) return [3 /*break*/, 6];\n                        value = values_1[_b];\n                        if (!(!Object.prototype.hasOwnProperty.call(value, 'contentType') ||\n                            Object.prototype.hasOwnProperty.call(value, 'data'))) return [3 /*break*/, 5];\n                        if (!(0, helper_1.isFileWithMetadata)(value)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, (0, helper_1.buildRequestFileObject)(value)];\n                    case 3:\n                        fileObj = _c.sent();\n                        multipartForm.append(key, fileObj.value, fileObj.options);\n                        return [3 /*break*/, 5];\n                    case 4:\n                        if (typeof value === 'object' && !(0, helper_1.isFileData)(value)) {\n                            value = JSON.stringify(value);\n                        }\n                        multipartForm.append(key, value);\n                        _c.label = 5;\n                    case 5:\n                        _b++;\n                        return [3 /*break*/, 2];\n                    case 6:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 7:\n                        // Path params\n                        url = parsePath(url, path);\n                        // Headers\n                        options.headers = __assign({}, options.headers);\n                        // Convert array-valued query params to strings\n                        if (qs && Object.keys(qs).length > 0) {\n                            Object.keys(qs).forEach(function (key) {\n                                if (Array.isArray(qs[key])) {\n                                    qs[key] = qs[key].join(',');\n                                }\n                            });\n                        }\n                        // Add service default endpoint if options.url start with /\n                        if (url && url.charAt(0) === '/') {\n                            url = (0, helper_1.stripTrailingSlash)(serviceUrl) + url;\n                        }\n                        url = (0, helper_1.stripTrailingSlash)(url);\n                        data = body;\n                        if (form) {\n                            data = (0, querystring_1.stringify)(form);\n                            headers['Content-type'] = 'application/x-www-form-urlencoded';\n                        }\n                        if (formData) {\n                            data = multipartForm;\n                            // form-data generates headers that MUST be included or the request will fail\n                            headers = (0, extend_1.default)(true, {}, headers, multipartForm.getHeaders());\n                        }\n                        // accept gzip encoded responses if Accept-Encoding is not already set\n                        headers['Accept-Encoding'] = headers['Accept-Encoding'] || 'gzip';\n                        if (!this.compressRequestData) return [3 /*break*/, 9];\n                        return [4 /*yield*/, this.gzipRequestBody(data, headers)];\n                    case 8:\n                        data = _c.sent();\n                        _c.label = 9;\n                    case 9:\n                        requestParams = {\n                            url: url,\n                            method: method,\n                            headers: headers,\n                            params: qs,\n                            data: data,\n                            raxConfig: this.raxConfig,\n                            responseType: options.responseType || 'json',\n                            paramsSerializer: { serialize: function (params) { return (0, querystring_1.stringify)(params); } },\n                        };\n                        return [2 /*return*/, this.axiosInstance(requestParams).then(function (res) {\n                                // sometimes error responses will still trigger the `then` block - escape that behavior here\n                                if (!res) {\n                                    return undefined;\n                                }\n                                // these objects contain circular json structures and are not always relevant to the user\n                                // if the user wants them, they can be accessed through the debug properties\n                                delete res.config;\n                                delete res.request;\n                                // the other sdks use the interface `result` for the body\n                                // eslint-disable-next-line @typescript-eslint/dot-notation\n                                res['result'] = ensureJSONResponseBodyIsObject(res);\n                                delete res.data;\n                                // return another promise that resolves with 'res' to be handled in generated code\n                                return res;\n                            }, function (err) {\n                                // return another promise that rejects with 'err' to be handled in generated code\n                                throw _this.formatError(err);\n                            })];\n                }\n            });\n        });\n    };\n    /**\n     * Format error returned by axios\n     * @param axiosError - the object returned by axios via rejection\n     * @returns the Error object\n     */\n    RequestWrapper.prototype.formatError = function (axiosError) {\n        // return an actual error object,\n        // but make it flexible so we can add properties like 'body'\n        var error = new Error();\n        // axios specific handling\n        // this branch is for an error received from the service\n        if (axiosError.response) {\n            axiosError = axiosError.response;\n            // The request was made and the server responded with a status code\n            // that falls out of the range of 2xx\n            delete axiosError.config;\n            delete axiosError.request;\n            error.statusText = axiosError.statusText;\n            error.name = axiosError.statusText; // ** deprecated **\n            error.status = axiosError.status;\n            error.code = axiosError.status; // ** deprecated **\n            error.message = parseServiceErrorMessage(axiosError.data) || axiosError.statusText;\n            // attach the error response body to the error\n            var errorBody = void 0;\n            try {\n                // try/catch to detect objects with circular references\n                errorBody = JSON.stringify(axiosError.data);\n            }\n            catch (e) {\n                logger_1.default.warn('Error field `result` contains circular reference(s)');\n                logger_1.default.debug(\"Failed to stringify error response body: \".concat(e));\n                errorBody = axiosError.data;\n            }\n            error.result = ensureJSONResponseBodyIsObject(axiosError);\n            error.body = errorBody; // ** deprecated **\n            // attach headers to error object\n            error.headers = axiosError.headers;\n            // print a more descriptive error message for auth issues\n            if (isAuthenticationError(axiosError)) {\n                error.message = 'Access is denied due to invalid credentials.';\n            }\n        }\n        else if (axiosError.request) {\n            // The request was made but no response was received\n            // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n            // http.ClientRequest in node.js\n            error.message = axiosError.message;\n            error.statusText = axiosError.code;\n            error.body = 'Response not received - no connection was made to the service.';\n            // when a request to a private cloud instance has an ssl problem, it never connects and follows this branch of the error handling\n            if (isSelfSignedCertificateError(axiosError)) {\n                error.message =\n                    \"The connection failed because the SSL certificate is not valid. \" +\n                        \"To use a self-signed certificate, set the `disableSslVerification` parameter in the constructor options.\";\n            }\n        }\n        else {\n            // Something happened in setting up the request that triggered an Error\n            error.message = axiosError.message;\n        }\n        return error;\n    };\n    RequestWrapper.prototype.getHttpClient = function () {\n        return this.axiosInstance;\n    };\n    RequestWrapper.getRaxConfig = function (axiosInstance, retryOptions) {\n        var config = {\n            retry: 4,\n            retryDelay: 1000,\n            httpMethodsToRetry: ['GET', 'HEAD', 'OPTIONS', 'DELETE', 'PUT', 'POST'],\n            // do not retry on 501\n            statusCodesToRetry: [\n                [429, 429],\n                [500, 500],\n                [502, 599],\n            ],\n            instance: axiosInstance,\n            backoffType: 'exponential',\n            checkRetryAfter: true,\n            maxRetryDelay: 30 * 1000, // default to 30 sec max delay\n        };\n        if (retryOptions) {\n            if (typeof retryOptions.maxRetries === 'number') {\n                config.retry = retryOptions.maxRetries;\n            }\n            if (typeof retryOptions.maxRetryInterval === 'number') {\n                // convert seconds to ms for retry-axios\n                config.maxRetryDelay = retryOptions.maxRetryInterval * 1000;\n            }\n        }\n        return config;\n    };\n    RequestWrapper.prototype.enableRetries = function (retryOptions) {\n        // avoid attaching the same interceptor multiple times\n        // to protect against user error and ensure disableRetries() always disables retries\n        if (typeof this.retryInterceptorId === 'number') {\n            this.disableRetries();\n        }\n        this.raxConfig = RequestWrapper.getRaxConfig(this.axiosInstance, retryOptions);\n        this.retryInterceptorId = rax.attach(this.axiosInstance);\n    };\n    RequestWrapper.prototype.disableRetries = function () {\n        if (typeof this.retryInterceptorId === 'number') {\n            rax.detach(this.retryInterceptorId, this.axiosInstance);\n            delete this.retryInterceptorId;\n            delete this.raxConfig;\n        }\n    };\n    RequestWrapper.prototype.gzipRequestBody = function (data, headers) {\n        return __awaiter(this, void 0, void 0, function () {\n            var contentSetToGzip, reqBuffer, streamData, err_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        contentSetToGzip = headers['Content-Encoding'] && headers['Content-Encoding'].toString().includes('gzip');\n                        if (!data || contentSetToGzip) {\n                            return [2 /*return*/, data];\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 5, , 6]);\n                        if (!(0, isstream_1.default)(data)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, (0, stream_to_promise_1.streamToPromise)(data)];\n                    case 2:\n                        streamData = _a.sent();\n                        reqBuffer = Buffer.isBuffer(streamData) ? streamData : Buffer.from(streamData);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        if (Buffer.isBuffer(data)) {\n                            reqBuffer = data;\n                        }\n                        else if (data.toString && data.toString() !== '[object Object]' && !Array.isArray(data)) {\n                            // this handles pretty much any primitive that isnt a JSON object or array\n                            reqBuffer = Buffer.from(data.toString());\n                        }\n                        else {\n                            reqBuffer = Buffer.from(JSON.stringify(data));\n                        }\n                        _a.label = 4;\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        err_1 = _a.sent();\n                        logger_1.default.error('Error converting request body to a buffer - data will not be compressed.');\n                        logger_1.default.debug(err_1);\n                        return [2 /*return*/, data];\n                    case 6:\n                        try {\n                            data = (0, zlib_1.gzipSync)(reqBuffer);\n                            // update the headers by reference - only if the data was actually compressed\n                            headers['Content-Encoding'] = 'gzip';\n                        }\n                        catch (err) {\n                            // if an exception is caught, `data` will still be in its original form\n                            // we can just proceed with the request uncompressed\n                            logger_1.default.error('Error compressing request body - data will not be compressed.');\n                            logger_1.default.debug(err);\n                        }\n                        return [2 /*return*/, data];\n                }\n            });\n        });\n    };\n    return RequestWrapper;\n}());\nexports.RequestWrapper = RequestWrapper;\n/**\n * Parses the path.\n * @param path - the path\n * @param params - the params\n * @returns the parsed path\n */\nfunction parsePath(path, params) {\n    if (!path || !params) {\n        return path;\n    }\n    return Object.keys(params).reduce(function (parsedPath, param) {\n        var value = encodeURIComponent(params[param]);\n        return parsedPath.replace(new RegExp(\"{\".concat(param, \"}\")), value);\n    }, path);\n}\n/**\n * Determine if the error is due to bad credentials\n * @param error - error object returned from axios\n * @returns true if error is due to authentication\n */\nfunction isAuthenticationError(error) {\n    var isAuthErr = false;\n    var code = error.status || null;\n    var body = error.data || {};\n    // handle specific error from iam service, should be relevant across platforms\n    var isIamServiceError = body.context && body.context.url && body.context.url.indexOf('iam') > -1;\n    if (code === 401 || code === 403 || isIamServiceError) {\n        isAuthErr = true;\n    }\n    return isAuthErr;\n}\n/**\n * Determine if the error is due to a bad self signed certificate\n * @param error - error object returned from axios\n * @returnstrue if error is due to an SSL error\n */\nfunction isSelfSignedCertificateError(error) {\n    var result = false;\n    var sslCode = 'DEPTH_ZERO_SELF_SIGNED_CERT';\n    var sslMessage = 'self signed certificate';\n    var hasSslCode = error.code === sslCode;\n    var hasSslMessage = hasStringProperty(error, 'message') && error.message.includes(sslMessage);\n    if (hasSslCode || hasSslMessage) {\n        result = true;\n    }\n    return result;\n}\n/**\n * Return true if object has a specified property that is a string\n * @param obj - object to look for property in\n * @param property - name of the property to look for\n * @returns true if property exists and is string\n */\nfunction hasStringProperty(obj, property) {\n    return Boolean(obj[property] && typeof obj[property] === 'string');\n}\n/**\n * Look for service error message in common places, by priority\n * first look in `errors[0].message`, then in `error`, then in\n * `message`, then in `errorMessage`\n * @param response - error response body received from service\n * @returns the error message if is was found, undefined otherwise\n */\nfunction parseServiceErrorMessage(response) {\n    var message;\n    if (Array.isArray(response.errors) &&\n        response.errors.length > 0 &&\n        hasStringProperty(response.errors[0], 'message')) {\n        message = response.errors[0].message;\n    }\n    else if (hasStringProperty(response, 'error')) {\n        message = response.error;\n    }\n    else if (hasStringProperty(response, 'message')) {\n        message = response.message;\n    }\n    else if (hasStringProperty(response, 'errorMessage')) {\n        message = response.errorMessage;\n    }\n    logger_1.default.info(\"Parsing service error message: \".concat(message));\n    return message;\n}\n/**\n * Check response for a JSON content type and a string-formatted body. If those\n * conditions are met, we want to return an object for the body to the user. If\n * the JSON string coming from the service is invalid, we want to raise an\n * exception.\n *\n * @param response - incoming response object\n * @returns response body - as either an object or a string\n * @throws error - if the content is meant as JSON but is malformed\n */\nfunction ensureJSONResponseBodyIsObject(response) {\n    // If axios gave us an empty string, it is because the response had an empty body\n    // which can happen for a HEAD request, etc. Return the empty string in that case\n    if (typeof response.data !== 'string' ||\n        response.data === '' ||\n        !(0, helper_1.isJsonMimeType)(response.headers['content-type'])) {\n        return response.data;\n    }\n    // If the content is supposed to be JSON but axios gave us a string, it is most\n    // likely due to the fact that the service sent malformed JSON, which is an error.\n    //\n    // We'll try to parse the string and return a proper object to the user but if\n    // it fails, we'll log an error and raise an exception.\n    var dataAsObject = response.data;\n    try {\n        dataAsObject = JSON.parse(response.data);\n    }\n    catch (e) {\n        logger_1.default.verbose('Response body was supposed to have JSON content but JSON parsing failed.');\n        logger_1.default.verbose(\"Malformed JSON string: \".concat(response.data));\n        throw (0, chain_error_1.chainError)(new Error('Error processing HTTP response:'), e);\n    }\n    return dataAsObject;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}